function t(t,e,o,n){var a,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(c=(r<3?a(c):r>3?a(e,o,c):a(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c}"function"==typeof SuppressedError&&SuppressedError;const e=new WeakSet;function o(t){r(t),a(t)}const n=new WeakMap;function a(t=document){if(n.has(t))return n.get(t);let e=!1;const o=new MutationObserver((t=>{for(const e of t)if("attributes"===e.type&&e.target instanceof Element)i(e.target);else if("childList"===e.type&&e.addedNodes.length)for(const t of e.addedNodes)t instanceof Element&&r(t)}));o.observe(t,{childList:!0,subtree:!0,attributeFilter:["data-action"]});const a={get closed(){return e},unsubscribe(){e=!0,n.delete(t),o.disconnect()}};return n.set(t,a),a}function r(t){for(const e of t.querySelectorAll("[data-action]"))i(e);t instanceof Element&&t.hasAttribute("data-action")&&i(t)}function c(t){const o=t.currentTarget;for(const n of s(o))if(t.type===n.type){const a=o.closest(n.tag);e.has(a)&&"function"==typeof a[n.method]&&a[n.method](t);const r=o.getRootNode();if(r instanceof ShadowRoot&&e.has(r.host)&&r.host.matches(n.tag)){const e=r.host;"function"==typeof e[n.method]&&e[n.method](t)}}}function*s(t){for(const e of(t.getAttribute("data-action")||"").trim().split(/\s+/)){const t=e.lastIndexOf(":"),o=Math.max(0,e.lastIndexOf("#"))||e.length;yield{type:e.slice(0,t),tag:e.slice(t+1,o),method:e.slice(o+1)||"handleEvent"}||"handleEvent"}}function i(t){for(const e of s(t))t.addEventListener(e.type,c)}const d=t=>String("symbol"==typeof t?t.description:t).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),l=(t,e="property")=>{const o=d(t);if(!o.includes("-"))throw new DOMException(`${e}: ${String(t)} is not a valid ${e} name`,"SyntaxError");return o};const u="attr";function f(t,e){g(t,u).add(e)}const b=new WeakSet;function p(t,e){if(b.has(t))return;b.add(t);const o=Object.getPrototypeOf(t),n=o?.constructor?.attrPrefix??"data-";e||(e=g(o,u));for(const o of e){const e=t[o],a=l(`${n}${o}`);let r={configurable:!0,get(){return this.getAttribute(a)||""},set(t){this.setAttribute(a,t||"")}};"number"==typeof e?r={configurable:!0,get(){return Number(this.getAttribute(a)||0)},set(t){this.setAttribute(a,t)}}:"boolean"==typeof e&&(r={configurable:!0,get(){return this.hasAttribute(a)},set(t){this.toggleAttribute(a,t)}}),Object.defineProperty(t,o,r),o in t&&!t.hasAttribute(a)&&r.set.call(t,e)}}const h=Symbol.for("catalyst");class CatalystDelegate{constructor(t){const e=this,o=t.prototype.connectedCallback;t.prototype.connectedCallback=function(){e.connectedCallback(this,o)};const n=t.prototype.disconnectedCallback;t.prototype.disconnectedCallback=function(){e.disconnectedCallback(this,n)};const a=t.prototype.attributeChangedCallback;t.prototype.attributeChangedCallback=function(t,o,n){e.attributeChangedCallback(this,t,o,n,a)};let r=t.observedAttributes||[];Object.defineProperty(t,"observedAttributes",{configurable:!0,get(){return e.observedAttributes(this,r)},set(t){r=t}}),function(t){let e=t.observedAttributes||[];const o=t.attrPrefix??"data-",n=t=>l(`${o}${t}`);Object.defineProperty(t,"observedAttributes",{configurable:!0,get:()=>[...g(t.prototype,u)].map(n).concat(e),set(t){e=t}})}(t),function(t){const e=d(t.name).replace(/-element$/,"");try{window.customElements.define(e,t),window[t.name]=customElements.get(e)}catch(t){if(!(t instanceof DOMException&&"NotSupportedError"===t.name))throw t}}(t)}observedAttributes(t,e){return e}connectedCallback(t,n){t.toggleAttribute("data-catalyst",!0),customElements.upgrade(t),function(t){for(const e of t.querySelectorAll("template[data-shadowroot]"))e.parentElement===t&&t.attachShadow({mode:"closed"===e.getAttribute("data-shadowroot")?"closed":"open"}).append(e.content.cloneNode(!0))}(t),p(t),function(t){e.add(t),t.shadowRoot&&o(t.shadowRoot),r(t),a(t.ownerDocument)}(t),n?.call(t),t.shadowRoot&&o(t.shadowRoot)}disconnectedCallback(t,e){e?.call(t)}attributeChangedCallback(t,e,o,n,a){p(t),"data-catalyst"!==e&&a&&a.call(t,e,o,n)}}function g(t,e){if(!Object.prototype.hasOwnProperty.call(t,h)){const e=t[h],o=t[h]=new Map;if(e)for(const[t,n]of e)o.set(t,new Set(n))}const o=t[h];return o.has(e)||o.set(e,new Set),o.get(e)}function y(t){new CatalystDelegate(t)}new Promise((t=>{"loading"!==document.readyState?t():document.addEventListener("readystatechange",(()=>t()),{once:!0})})),new Promise((t=>{const e=new AbortController;e.signal.addEventListener("abort",(()=>t()));const o={once:!0,passive:!0,signal:e.signal},n=()=>e.abort();document.addEventListener("mousedown",n,o),document.addEventListener("touchstart",n,o),document.addEventListener("keydown",n,o),document.addEventListener("pointerdown",n,o)}));export{t as _,f as a,y as c,g as m};
